function generateQRCode() {
  var text = document.getElementById("text-input").value.trim();
  if (!text) {
    document.getElementById("qr-error").textContent = "Kérlek, írj be valamilyen szöveget!";
    return;
  }
  // Eredeti formátum: szóközökkel elválasztva (pl. "7004567 Leírás")
  var parts = text.split(" ");
  var anyagszam = parts[0] || "";
  var textPart = parts.slice(1).join(" ") || "";
  document.getElementById("szam").textContent = anyagszam;
  document.getElementById("szoveg").textContent = textPart;

  var qrcodeCanvas = document.getElementById("qrcode");
  qrcodeCanvas.width = 95; // Biztosítjuk a canvas méretét
  qrcodeCanvas.height = 95;
  QRCode.toCanvas(qrcodeCanvas, text, { width: 95 }, function (error) {
    if (error) {
      document.getElementById("qr-error").textContent = "Hiba történt a QR-kód generálása közben: " + error.message;
      console.error("QR Kód generálási hiba:", error);
    } else {
      document.getElementById("qr-error").textContent = "";
      console.log("QR kód generálva!");
    }
  });
}
